# 4.4 Solidification
This section defines how messages get solid in the Tangle.

## 4.4.1 Motivation
**Solidification** is a process of requesting missing referenced messages with some checks. It can be recursively repeated until all of a message's past cone until the genesis (or snapshot) become solid. 

In that way, the Tangle enables all nodes to retrieve all of a message's history, even the ones joining the network at a point later in time.

## 4.4.2 Definitions
* **valid**: A message is considered valid if it follows the protocol, i.e., passing all checks from filters to the message booker.
* **parents age check**: A check that ensures the timestamps of parents and child are valid, following the details defined in section [Parent age check](#parent-age-check) 
> TODO: put the link of timestamp check
* **solid**: 
    1. all its parents are in the storage of this node and also marked as solid,
    2. it passes parent age check,
    3. all its parents are valid.

## 4.4.3 Detailed Design
During solidification, if a node is missing a referenced message, it is stored in the **solidification buffer** and not yet processed. A node can ask its neighbors for the missing message by sending a **solidification request** containing the message ID. Then, the requested message is marked solid after the following checks:
1. all its parents are in the storage of this node and also marked as solid,
2. it passes parent age check,
3. all its parents are valid.

The figure below shows the process of solidification:
![GoShimmer-flow-Page-11](https://user-images.githubusercontent.com/11289354/111571487-cf492200-87e1-11eb-811c-d02e7547aab8.png)

## 4.4.4 Possible attacks
A malicious node can send unsolidifiable messages to a node. A simple protection is to only repeat solidification requests `solidificationMaxRepeat` times before the message gets deleted from the node's solidification buffer. 