# Tip Selection Algorithm 

## Introduction

The tip selection algorithm is the method by which messages are selected for approval by other issued messages joining the network.  This approval mechanism represents “belief” in the Tangle: If message y approves message x, this implies that y believes that x is valid and that its entire history is also valid. 

Although formelly the algorithm played a role in consensus during IOTA 1.0, this does not holds anymore. In IOTA 2.0 the tip selection plays the following role: to allow the Tangle to grow in a stable and secure way, with quick approval and finality times. 


We call the new Tip-Section algorithm "R-URTS", which means "Restricted Uniform Random Tip Selection". There are three main differences that the new algorithm has from the old one:

1. **Number of Parents:** The new algorithm has a non-fixed number of messages that needs to be approved, which ranged from two to eight.
2. **Approval Switch Mechanism:** A new mechanism that will allow us to keep a clear tangle while avoid splittings due to disliked branches. 
3. **Uniform Selection:** A change from the old Random Walk tip selection, we will use a much faster and simpler solution that will select uniformly among a subset of eligible tips. 

In the following subsections we will describe those elements before presenting the formal R-URTS algorithm. 



## Parental Number
To attach a new transaction to the Tangle, the algorithm needs to select and approve  between two and eight previous messages among a list of tips.

This defined a new parameter, represented by $k$, that we will call the *Parental Number*.

The variation on the number of approvals (two to eight)  is there to counteract spam during low-congestion periods: A higher number of approvals can merge easier the spammer eligible messages with the tangle, keeping it growing in a healthy way. The standard is to use two approvals on uncongested periods. 

## Approval Switch

We further improve the algorithm by introducing the approval switches, by separating the approvals in two categories: “strong approvals” and “weak approvals”. In a simple way, strong approvals works as we consider today the “approvals”, keeping a clean past cone. Weak approvals emulates the good properties of the “White Flag Approach” from IOTA 1.5: it means we approve the content of the message without approving its past cone necessarily, allowing such message to participate in the Tangle without creating unmergeable branches. 

## R-URTS
The selection algorithm to be used will be the RURTS (Restricted Uniform Random Tip Selection), which selects with uniform probability among the list of tips (restricted to the eligible ones).  

## Attack Vectors

### Spammer Rate

### Game Theory 

