<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rate Control - IOTA 2.0 Research Specifications</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="0.0 Preface.html">Preface</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Control Files</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="1.1 Introduction.html"><strong aria-hidden="true">1.1.</strong> Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.</strong> Table of Contents</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.3.</strong> Terminology</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.4.</strong> Index of parameters</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.5.</strong> References</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Structure</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Data Types</div></li><li class="chapter-item expanded "><a href="2.2 Message Layout.html"><strong aria-hidden="true">2.2.</strong> Message Layout</a></li><li class="chapter-item expanded "><a href="2.3 Standard Payloads Layout.html"><strong aria-hidden="true">2.3.</strong> Payloads Layout</a></li><li class="chapter-item expanded "><a href="2.4 Data flow.html"><strong aria-hidden="true">2.4.</strong> Data Flow</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Network Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Communication Models</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Bootstrapping</div></li><li class="chapter-item expanded "><a href="3.3 Peer Discovery.html"><strong aria-hidden="true">3.3.</strong> Peer Discovery</a></li><li class="chapter-item expanded "><a href="3.4 Neighbor Selection.html"><strong aria-hidden="true">3.4.</strong> Neighbor Selection</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> Manual Peering</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Communication Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="4.1 The Tangle.html"><strong aria-hidden="true">4.1.</strong> The Tangle</a></li><li class="chapter-item expanded "><a href="4.2 Timestamps.html"><strong aria-hidden="true">4.2.</strong> Timestamps</a></li><li class="chapter-item expanded "><a href="4.3 Tip Selection Algorithm.html"><strong aria-hidden="true">4.3.</strong> Tip Selection Algorithm</a></li><li class="chapter-item expanded "><a href="4.4 Solidification.html"><strong aria-hidden="true">4.4.</strong> Solidification</a></li><li class="chapter-item expanded "><a href="4.5 Rate Control.html" class="active"><strong aria-hidden="true">4.5.</strong> Rate Control</a></li><li class="chapter-item expanded "><a href="4.6 Congestion Control.html"><strong aria-hidden="true">4.6.</strong> Congestion Control</a></li><li class="chapter-item expanded "><a href="4.7 Markers.html"><strong aria-hidden="true">4.7.</strong> Markers</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.8.</strong> Message Creation</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Value Transfer Application</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="5.1 UTXO.html"><strong aria-hidden="true">5.1.</strong> UTXO</a></li><li class="chapter-item expanded "><a href="5.2 Ledger State.html"><strong aria-hidden="true">5.2.</strong> Ledger State</a></li><li class="chapter-item expanded "><a href="5.3 Mana.html"><strong aria-hidden="true">5.3.</strong> Mana</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Consensus Applications</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="6.1 Objects of Consensus.html"><strong aria-hidden="true">6.1.</strong> Object of Consensus</a></li><li class="chapter-item expanded "><a href="6.2 Opinion Setting.html"><strong aria-hidden="true">6.2.</strong> Opinion Setting</a></li><li class="chapter-item expanded "><a href="6.3 Fast Probabilistic Consensus.html"><strong aria-hidden="true">6.3.</strong> FPC</a></li><li class="chapter-item expanded "><a href="6.4 Finalization.html"><strong aria-hidden="true">6.4.</strong> Finalization</a></li><li class="chapter-item expanded "><a href="6.5 dRNG.html"><strong aria-hidden="true">6.5.</strong> dRNG</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div>Appendix</div></li><li class="chapter-item expanded affix "><div>Snapshots</div></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">IOTA 2.0 Research Specifications</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="45-rate-control-through-adaptive-proof-of-work"><a class="header" href="#45-rate-control-through-adaptive-proof-of-work">4.5 Rate Control through Adaptive Proof of Work</a></h1>
<h2 id="451-introduction"><a class="header" href="#451-introduction">4.5.1 Introduction</a></h2>
<p>In Proof of Work-based blockchains, a built-in rate limit is enforced by the mining difficulty adjustment and the message fees. Without this filter, however, an attacker may be able to easily issue a very large number of messages to potentially harm the network. In order to enable the machine-to-machine economy, IOTA does not allow neither mining race nor fees, which makes an <em>explicit rate control mechanism necessary</em>. In order to ensure that the network traffic does not exceed the allowed throughput determined by the limited resources, it is fundamental to limit the number of messages issued at node level.</p>
<p>The mechanisms described act as an emergency break during spam attacks, by slowing down the rate of messages a node can issue.  For honest nodes, the proof of work difficulty should be small enough not to hamper performance.  Finer controls on the access are developed in <a href="./4.6%20Congestion%20Control.html">Section 4.6 - Congestion Control</a>, which regulate network traffic during normal periods of congestion.</p>
<h3 id="4511-legacy-implementation"><a class="header" href="#4511-legacy-implementation">4.5.1.1 Legacy implementation</a></h3>
<p>In the legacy IOTA implementation, a user is asked to solve a proof of work (PoW) before issuing a new message. The user can either perform that computation locally or outsource it to a third-party service.</p>
<p>In the legacy network, the difficulty of the PoW is set to some value <code>POW_DIFFICULTY</code>. Received messages are stored in a queue and processed in FIFO order. The protocol dictates that the nodes forward messages if and only if the difficulty of the PoW performed is greater or equal to <code>POW_DIFFICULTY</code>. Otherwise, messages <em>shall</em> be dropped.</p>
<h3 id="4512-proposal"><a class="header" href="#4512-proposal">4.5.1.2 Proposal</a></h3>
<p>Similar to the legacy implementation, we require the solution of a given cryptographic puzzle before a message is issued. Here, however, we impose that the difficulty of the challenge progressively increases as a node issues multiple messages in a short time interval.</p>
<p>The goal of this document is to define this rate control mechanism, called <em>Adaptive PoW</em> (APoW), which permits nodes' theoretical throughput to be independent on their hardware equipment. We believe that this mechanism is fundamental to prevent spam and denial-of-service attacks, disallowing dishonest nodes from inflating their neighbors' buffers through large number of messages in a short time. Unlike APoW, the congestion control mechanism described in <a href="./4.6%20Congestion%20Control.html">Section 4.6 - Congestion Control</a> sets the actual throughput depending on nodes' access Mana, and protects the protocol against Sybil attacks and selfish behavior.</p>
<h3 id="4513-dependencies"><a class="header" href="#4513-dependencies">4.5.1.3 Dependencies</a></h3>
<p>The Rate Control specification depends on the following specifications:</p>
<ul>
<li>
<p><a href="./3.3%20Peer%20Discovery.html">3.3 - Peer Discovery</a></p>
</li>
<li>
<p><a href="./4.2%20Timestamps.html">4.2 - Timestamps</a></p>
</li>
</ul>
<h2 id="452-adaptive-proof-of-work"><a class="header" href="#452-adaptive-proof-of-work">4.5.2 Adaptive Proof of Work</a></h2>
<p>All nodes in the network have knowledge of the following three fixed global parameters:</p>
<ul>
<li><em>Base difficulty \((d_0)\)</em>. It sets the initial difficulty of PoW.</li>
<li><em>Adaptation rate \((\gamma\in [0, 1])\)</em>. It provides the rate at which difficulty will be adjusted. Equivalently, \(1/\gamma\) indicates how many messages can be sent per time window without increasing the PoW difficulty.</li>
<li><em>APoW time window \((w&gt;0)\)</em>. It describes the width of the time interval considered by the algorithm, i.e., its granularity.</li>
</ul>
<h3 id="4521-message-generation"><a class="header" href="#4521-message-generation">4.5.2.1 Message generation</a></h3>
<p>Let \(t\) be the output of the function <code>CurrentTime()</code>. If node <code>m</code> wants to issue a new message, it <em>shall</em> perform a PoW with difficulty \(d_m(t)\) such that</p>
<p>$$d_m(t) = d_0 + \left \lfloor{\gamma\cdot r_m(t)}\right \rfloor$$</p>
<p>where \(r_m(t)\) represents the number of messages issued by node <em>m</em> with (message) timestamp in the interval \([t-w, t]\). Note that when \(\gamma = 0\), the algorithm becomes equivalent to the legacy IOTA implementation.</p>
<h3 id="4522-message-verification"><a class="header" href="#4522-message-verification">4.5.2.2 Message verification</a></h3>
<p>When a node <code>n</code> receives a message from a neighbor, it shall check that PoW with an appropriate difficulty was performed. The verification of the correctness of the PoW computation is the last step of the parser checks, right after signature verification (see <a href="./2.4%20Data%20flow.html">Section 2.4 - Data Flow</a>). Let us assume that node <code>n</code> receives a message with difficulty \(d_m\) issued by node <code>m</code>. To decide whether this message should be discarded, node <code>n</code> counts how many messages \(r_m(t)\) issued by <code>m</code> it has received in the last \(w\) time units. In accordance with the formula above, the node validates the PoW only if the following condition is satisfied:</p>
<p>$$d_m \geq d_0 + \left\lfloor{\gamma\cdot r_m(t)}\right\rfloor.$$</p>
<p>Discussions on the correctness of this procedure can be found on a <a href="https://iota.cafe/t/adaptive-pow-without-sequence-numbers/363">related article</a>.</p>
<h2 id="453-algorithm"><a class="header" href="#453-algorithm">4.5.3 Algorithm</a></h2>
<h3 id="4531-protocol-parameters"><a class="header" href="#4531-protocol-parameters">4.5.3.1 Protocol parameters</a></h3>
<p>In line with the previous section, all nodes know the constants shown by Table 4.5.1.</p>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>POW_BASE</code></td><td>integer</td><td>The base difficulty \(d_0\)</td></tr>
<tr><td><code>APOW_RATE</code></td><td>float</td><td>The adaptation rate \(\gamma\) (proposed values [0.1 - 1])</td></tr>
<tr><td><code>APOW_WINDOW</code></td><td>integer</td><td>The APoW time window \(w\) (proposed values [10 - 60s])</td></tr>
</tbody></table>
<p><em>Table 4.5.1 - Global constants.</em></p>
<p>The choice of the time window is crucial in the correct functioning of the algorithm. Our claim is that the time window must be kept small for two main reasons:</p>
<ul>
<li>Message burst can be captured;</li>
<li>Implementation is easier as it requires smaller caches.</li>
</ul>
<p>However, it is fundamental to keep this time window at least larger than the gratuitous network delay <code>DLARGE</code> (see <a href="./4.2%20Timestamps.html">Section 4.2 - Timestamps</a>).</p>
<h3 id="4532-local-variables-and-metadata"><a class="header" href="#4532-local-variables-and-metadata">4.5.3.2 Local variables and metadata</a></h3>
<p>Local variables and metadata are described in Table 4.5.2.</p>
<table><thead><tr><th>Variable/Metadata</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>timestamp</code></td><td>integer</td><td>A value declared by the node representing time at which the message has been issued</td></tr>
<tr><td><code>nodeID</code></td><td>nodeID</td><td>Identity of the node issuing the message defined as the <code>blake2b</code> hash of its public key</td></tr>
<tr><td><code>targetDifficulty</code></td><td>integer</td><td>Minimum difficulty needed to pass the APoW verification</td></tr>
<tr><td><code>powCheck</code></td><td>boolean</td><td>Boolean value which indicates whether the APoW verification is successful or not</td></tr>
<tr><td><code>ownId</code></td><td>nodeID</td><td>Identity of the node running the algorithm</td></tr>
<tr><td><code>msgCache</code></td><td>list</td><td>Cache storing the timestamp of the most recent messages received by <code>ownID</code></td></tr>
<tr><td><code>nodeMap</code></td><td>list</td><td>List of nodeIDs which have issued messages recently (within 2 APoW timestamp windows)</td></tr>
</tbody></table>
<p><em>Table 4.5.2 - Local variables and metadata.</em></p>
<h3 id="4533-built-in-functions"><a class="header" href="#4533-built-in-functions">4.5.3.3 Built-in functions</a></h3>
<p>Pseudocodes introduced in the next section will use the built-in functions described in Table 4.5.3.</p>
<table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Floor(x)</code></td><td>Give the greatest integer less than or equal to <code>x</code></td></tr>
<tr><td><code>Sort(x, y)</code></td><td>Sort list <code>x</code> by metric <code>y</code></td></tr>
<tr><td><code>Append(x, y)</code></td><td>Add a new element <code>y</code> to list <code>x</code></td></tr>
<tr><td><code>Remove(x)</code></td><td>Remove the oldest element from the ordered data structure <code>x</code></td></tr>
<tr><td><code>Head(x)</code></td><td>Get (without removing) the oldest element from the ordered data structure <code>x</code></td></tr>
<tr><td><code>CurrentTime()</code></td><td>Current time computed with the local clock</td></tr>
</tbody></table>
<p><em>Table 4.5.3 - Built-in functions.</em></p>
<h3 id="4534-pseudocode"><a class="header" href="#4534-pseudocode">4.5.3.4 Pseudocode</a></h3>
<h4 id="targetpowtimestamp-nodeid"><a class="header" href="#targetpowtimestamp-nodeid"><code>TargetPoW(timestamp, nodeID)</code></a></h4>
<p>This function accesses the ledger to check the history of messages for <code>nodeId</code>.</p>
<pre><code class="language-vbnet">FUNCTION targetPoW = TargetPoW(timestamp, nodeID)
    # cache update (this is done as an optimization)
    WHILE CurrentTime() - Head(msgCache).timestamp &gt;  2 * APOW_WINDOW
        Remove(msgCache)
    Append(msgCache, &lt;nodeID, timestamp&gt;)
    Sort(msgCache, `timestamp`)
    countMsg = 0
    FOR msg IN msgCache[nodeID]
        IF msg &gt; timestamp - APOW_WINDOW AND msg &lt; timestamp
            countMsg++
    RETURN BASE_POW + Floor(APOW_RATE * countMsg)
</code></pre>
<h4 id="apowgeneration"><a class="header" href="#apowgeneration"><code>APoWGeneration()</code></a></h4>
<p>This function sets the difficulty at which the message creator should compute the PoW when generating a new message.</p>
<pre><code class="language-vbnet">### upon creation of a new message

FUNCTION targetPoW = APoWGeneration()
    RETURN TargetPoW(CurrentTime(), ownID)
</code></pre>
<h4 id="apowverificationmsg"><a class="header" href="#apowverificationmsg"><code>APoWVerification(msg)</code></a></h4>
<p>This function is triggered in the parser by new messages, see <a href="./2.4%20Data%20flow.html">Section 2.4 - Data Flow</a>. It returns <code>TRUE</code> if the PoW attached to the message is sufficient, or <code>FALSE</code> otherwise.</p>
<pre><code class="language-vbnet">#### upon arrival of a message msg

FUNCTION powCheck = APoWVerification(msg)
    targetPoW = TargetPoW(msg.timestamp, msg.nodeID)
    IF msg.pow &gt;= targetPoW
        IF nodeMap[msg.nodeID] == NULL
            Append(nodeMap, msg.nodeID)
        Append(msgCache, msg.timestamp)
        RETURN TRUE
    ELSE
        RETURN FALSE
</code></pre>
<h3 id="4535-implementation"><a class="header" href="#4535-implementation">4.5.3.5 Implementation</a></h3>
<p>The most critical part of the algorithm concerns counting the number of messages recently issued by a node. Since querying the database may be expensive, we propose to cache the most recent messages. To this end, we use two data structures (see Image 4.5.4):</p>
<ul>
<li><code>nodeMap</code>. Each entry in the hashmap corresponds to a different nodeId and points to the doubly linked list of recent messages of the same node.</li>
<li><code>msgCache</code>. A queue which removes old messages and adds new ones according to a FIFO policy.</li>
</ul>
<p><img src="https://i.imgur.com/vgbhyJO.png" alt="" /></p>
<p><em>Image 4.5.4 - Proposed data structures for the implementation of the rate control mechanism.</em></p>
<p>Both data structures point to the same locations of memory which store the timestamp of the message. These locations of memory also store the pointers to the other elements of <em>nodeMap</em> and <em>msgCache</em>.</p>
<p>The size of the cache \(C\) (in number of timestamps) must be larger of the product between the maximum network throughput and the time window \(w\). Assume that max throughput is 1000 TPS and the time window is 50 s, cache size must be larger than 50,000. Given \(N\) the number of nodes issuing recent messages, our caching scheme provides the following performance:</p>
<ul>
<li>cache update: \(\mathcal{O}(1)\);</li>
<li>msg counter: \(\mathcal{O}(C/N)\);</li>
<li>cache size: \(&lt;10\) MB.</li>
</ul>
<p>Assume that a node receives a message with PoW difficulty equal to <em>targetPoW</em>. However, the node cannot (immediately) know whether older messages have been issued before the timestamp of such message, which would make its PoW not sufficient. In this case, in order not to slow down the network, the node will forward anyway the message for scheduling.</p>
<p>An attacker may exploit the above in order to issue progressively older messages which would be accepted with easier PoW difficulty. Since the timestamp validation window is pretty large, this attack may theoretically be effective.</p>
<p>In case a node receives a new message with a timestamp that would make other messages from the same node would not have the correct PoW difficulty, the node will be blacklisted. However, no transactions which are already scheduled would be dropped.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="4.4 Solidification.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="4.6 Congestion Control.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="4.4 Solidification.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="4.6 Congestion Control.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
