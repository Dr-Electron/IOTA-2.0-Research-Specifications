

These specifications are not stable


  
-   [Glossary of terms](https://docs.google.com/document/d/1Ak8NT9e9NFQIrXahYmlgj_FLH7mMT5NR4rlTwczfQSE/edit#heading=h.h27luwpmebto)
    
-   [Diagram summarizing the protocol](https://drive.google.com/file/d/1DS5lUas9URTYwspkBl5nlp80R2opE5fC/view?usp=sharing)
    

# Introduction

These are the research specifications for the Iota 2.0 protocol. To orientate the reader, we provide a brief summary of the protocol. 

The network will be maintained via the Networking layer which consists of two basic modules: the peer discovery module which provides a list of nodes actively using the network, and the neighbor selection (aka autopeering) which actually picks links. The Networking layer also manages the gossiping.

  

The communication layer concerns the information communicated through the network layer. All information exchanged in the Iota 2.0 are contained in objects called messages. To prevent the network from being overloaded, the rate control and congestion control modules control how many messages are created and which messages gossiped. Messages will be stored in the message tangle, whose DAG structure secures all the data. The processing specification describes how messages must be processed in order to meet the demands of the other components.

  

On top of the communication layer is the application layer. Anybody can develop applications which run on this layer, and nodes can choose which applications to run.  Of course, these applications can also be dependent on eachother. There are several core applications which must be run by all nodes. 

The most important application is the Value Transfer Application which maintains the ledger state and a quantity called mana which is held by each node.  Specifically, this application maintains a separate tangle called the value tangle, a DAG whose vertices are called value objects.  Each value object contains a transaction, although the same transaction may appear in several different value objects.  The references in each value object represent approval, and indicate which transactions should and should not be included into the ledger state.  

  

Several core applications provide consensus and regulate timestamps in the message tangle and conflicts in the value tangle (a component of the value transfer application). FPC or Fast Probabilistic Consensus is a binary voting protocol which produces consensus on a bit. Section 5.2 outlines how this binary voting protocol is used to vote on actual objects, particularly transactions and messages.  In particular, FPC determines which transactions are to be written to the ledger, and which ones should be left to be orphaned. The FPC application relies on another application called the DRNG,  the Distributed Random Number Generator. Lastly, the resynchronization application detects any FPC failures.

We now provide a more detailed explanation of some of the key components. 

## Mana 

Several modules require sybil protection, including:
 - Congestion control
 - Autopeering
 - FPC
 - DRNG

The sybil protection mechanism used in IOTA 2.0 is called mana. Mana is a number associated with each node ID, and can be thought of as extension of the ledger state.  Every transaction will contain a `pleddged Node ID` field.  Roughly speaking, when a transaction is booked, this node ID will receive mana dependent on the amount of funds moved in the transaction.  Thus, when a transaction is booked, the transaction doe not only mutate the ledger state, it also mutates the mana state.  

The only way for a node to receive mana is to convince a token holder to pledge them mana when moving a transaction.  This can be done in a variety of ways, for example, a an individual operating a node can own token, and then create a transaction pledging mana to his own node ID.  The exact relationship between token holders and node operators is not discussed in this document.  However, since token are a scarce resource, mana is also a scarce resource, making it an effective sybil protection mechanism.  See Section 4.3 for more details.  

## FPC 

FPC stands for fast probabilistic consensus.  This is a binary voting protocol that allows a large grout of nodes to come to consensus on the value of a Boolean value.  The protocol begins with each node having an initial opinion.  Then, nodes randomly choose other nodes to querry about their opinion. If the number of responses which have the opposite opinion than a certain threshold 
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTc0NDkyNzcyOSwtMTE3MjE1Mzc2MSwyMD
kzMDk4NjY0LDQ2OTAyNDg0MiwtNzA5MTc2NzQyLDUyNjAwNzcw
MiwtMjI2MTI2ODY5LC00MTEwNTQ2MzYsLTEyMzg4NDU3OTIsND
QwMDI4MzY3LDk2NTc3ODYwOV19
-->